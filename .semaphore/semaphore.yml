version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
global_job_config:
  prologue:
    commands:
      - sudo apt install git -y
      - sudo apt-get install python3.6
      - sudo pip3 install python-telegram-bot --upgrade
blocks:
  - name: install Deps
    task:
      jobs:
        - name: 'Job #1'
          commands:
            - sudo apt install git -y
            - sudo apt-get install python3.6
            - checkout
            - pip3 install python-telegram-bot --upgrade
            - 'git clone https://github.com/Chityanj/ota_scripts'
            - 'export TELEGRAM_TOKEN=731390134:AAHzzW-aILiCWcEGitZyo_h0NiglSsQPdTs'
            - bash ota_scripts/helpers/latest_device.sh
            - . ota_scripts/helpers/push_helpers.sh
            - bash ota_scripts/push.sh
      env_vars: []
